### nginx使用场景
1. 静态资源服务
    - 通过本地文件系统提供服务（css,js,小图片）
2. 反向代理
    - nginx强大的性能（高并发）
    - 缓存（链路增加后，访问时延增加，把一些不变的资源缓存在nginx）
    - 负载均衡
3. api服务
    - nginx直接访问数据库、缓存服务或者应用服务，利用ng强大的并发，实现web防火墙这样复杂的业务功能。lua等语言结合自身的库，这样使api服务具有强大的业务处理功能

### nginx出现的背景
1. 互联网数据量的快速增长
    - 互联网的快速普及
    - 物联网
    - 全球化
2. 摩尔定律：性能提升
    - 单核1GhzCPU在1.5年后需要更新2Ghz，性能翻倍。但是在多核CPU中，摩尔定律失效了。8C CPU在1.5年后升级到16C CPU性能反而不能翻倍，性能损耗原因是操作系统和大量软件没有做好多核架构的准备，eg：Apache。
3. Apache的低效性
    - 架构模型：一个进程同一时间只能处理一个连接
    - 使用操作系统进程间切换的特性
    - 操作系统设计成多核CPU服务于成百上千个进程
    - 当Apache面临上万的连接时，不能开上万的进程（OS限制），同时进程间切换代价太高，当上万连接同时来的时候，只能不断的进程间切换来处理上万请求，进程切换损耗太大，所以很低效。

### nginx的优点
1. 高并发，高性能
    - 高并发只需每个连接需要的内存特别少，但同时达到高性能，需要非常好的设计。
    - 32C64G配置的server，ng可达到数千万的并发连接
2. 可扩展性好
    - 体现在模块化设计
    - 第三方模块、生态圈非常好：openresty
3. 高可靠性
    - 持续不间断运行数年
    - 一年宕机时间可以用秒来计算
4. 热部署
    - 不停止服务的方式升级ng。
5. BSD许可证
    - 开源免费，可以修改开源代码并用在商业场景，是合法。

### nginx的组成
1. nginx的二进制文件
    - 由各模块（官方+第三方）编译出的一个文件
    - 相当于汽车
2. nginx.conf配置文件
    - 控制nginx的行为
    - 通过conf来开启功能
    - 相当于驾驶员
3. access.log访问日志
    - 相当于汽车的GPS轨迹
    - 处理过的http的请求信息和响应信息
    - 通过此可分析运营、运维的分析
4. error.log错误日志
    - 出现不可预期的错误，可通过次定位
    - 相当于黑匣子

### nginx的版本
1. feature、bugfix和change
2. mainline:主干版本（单数版本） stable:稳定版本（稳定版本）
3. tenignx修改了官方主干代码，经历了严苛的考验，很多特性领先于官方。但是无法跟着官网的版本去升级。
4. OpenResty是一个基于Nginx与Lua 的高性能Web 平台，其内部集成了大量精良的Lua 库、第三方模块以及大多数的依赖项，用于方便地搭建能够处理超高并发、扩展性极高的动态 Web 应用、Web 服务和动态网关。OpenResty 通过汇聚各种设计精良的Nginx 模块，从而将Nginx 有效地变成一个强大的通用Web 应用平台。
5. 没有太多的业务需求的话选择开源版就足够了
6. 如果需要开发API服务器或者web防火墙，选择openresty